<?xml version="1.0" encoding="UTF-8"?>
<!--
  This software is in the public domain under CC0 1.0 Universal plus a
   Grant of Patent License.

   To the extent possible under law, the author(s) have dedicated all
   copyright and related and neighboring rights to this software to the
   public domain worldwide. This software is distributed without any warranty.

   You should have received a copy of the CC0 Public Domain Dedication
   along with this software. If not, see
   <http://creativecommons.org/publicdomain/zero/1.0/>.
 -->
<entity-facade-xml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-facade-3.xsd">

    <!-- MCP Screen Documentation Wiki Space -->
    <moqui.resource.wiki.WikiSpace wikiSpaceId="MCP_SCREEN_DOCS"
        description="MCP Screen Documentation - LLM instructions for specific screens"
        restrictView="N"
        restrictUpdate="Y"
        rootPageLocation="dbresource://WikiSpace/MCP_SCREEN_DOCS.md"/>

    <!-- WikiSpace Root Page -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_SCREEN_DOCS"
        parentResourceId=""
        filename="MCP_SCREEN_DOCS.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_SCREEN_DOCS"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Moqui MCP Server

This server provides access to Moqui ERP through MCP.

## Getting Started

Use the following discovery tools to explore available functionality:
- `moqui_browse_screens`: Browse Moqui screen hierarchy
- `moqui_search_screens`: Search for screens by name to find their paths
- `moqui_get_screen_details`: Get input parameters for specific screens

## Common Screen Paths

### Catalog Operations
- `/PopCommerce/PopCommerceAdmin/Catalog/dashboard`: Catalog overview and management
- `/PopCommerce/PopCommerceAdmin/Catalog/Product/FindProduct`: Search and browse products
- `/PopCommerce/PopCommerceAdmin/Catalog/Feature/FindFeature`: Search by features like color or size
- `/PopCommerce/PopCommerceAdmin/Catalog/Product/EditPrices`: View and update product prices

### Order Management
- `/PopCommerce/PopCommerceAdmin/Order/FindOrder`: Lookup and create sales/purchase orders
- `/PopCommerce/PopCommerceAdmin/QuickSearch`: General order and customer search

### Party & Customer Management
- `/PopCommerce/PopCommerceAdmin/Party/FindParty`: Manage all parties (People, Organizations)
- `/PopCommerce/PopCommerceRoot/Customer`: Customer storefront account management
- `User`: Internal user account, notifications, and messages
- `/PopCommerce/PopCommerceAdmin/QuickSearch`: Customer lookup

### Facility & Accounting
- `/PopCommerce/PopCommerceAdmin/Facility/FindFacility`: Manage warehouses and inventory locations
- `/PopCommerce/PopCommerceAdmin/Accounting/dashboard`: Financial management and GL accounting

### System & Developer Tools
- `/tools/Tools`: Developer tools, entity data editing, and service references
- `/tools/System`: System administration, cache management, and security settings

## Tips for LLM Clients

- All screens support parameterized queries for filtering results
- Use `moqui_render_screen` with screen path to execute screens
- Screen paths use forward slash notation (e.g., `/PopCommerce/PopCommerceAdmin/Catalog/Product`)
- Check `moqui_get_screen_details` for required parameters before rendering
- Use `renderMode: "mcp"` for structured JSON output or `"text"` for human-readable format]]></fileData>
    </moqui.resource.DbResourceFile>

    <!-- Root Wiki Page -->
    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/root"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="root"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/root"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-02 00:00:00.000"/>

    <!-- Root Screen Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_ROOT"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="root.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_ROOT"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Moqui MCP Server

This server provides access to Moqui ERP through MCP. Typically you will be searching for a product by name or by a feature like size or color.
If it is a feature based query it is probably best to use the FindFeature screen to locate the feature and then use FindProduct to search for products with that feature.

## Getting Started

Use the following discovery tools to explore available functionality:
- `moqui_browse_screens`: Browse Moqui screen hierarchy
- `moqui_search_screens`: Search for screens by name to find their paths
- `moqui_get_screen_details`: Get input parameters for specific screens

## Common Screen Paths

### Catalog Operations
- `/PopCommerce/PopCommerceAdmin/Catalog/dashboard`: Catalog overview and management
- `/PopCommerce/PopCommerceAdmin/Catalog/Product/FindProduct`: Search and browse products
- `/PopCommerce/PopCommerceAdmin/Catalog/Feature/FindFeature`: Search by features like color or size
- `/PopCommerce/PopCommerceAdmin/Catalog/Product/EditPrices`: View and update product prices

### Order Management
- `/PopCommerce/PopCommerceAdmin/Order/FindOrder`: Lookup and create sales/purchase orders
- `/PopCommerce/PopCommerceAdmin/QuickSearch`: General order and customer search

### Party & Customer Management
- `/PopCommerce/PopCommerceAdmin/Party/FindParty`: Manage all parties (People, Organizations)
- `/PopCommerce/PopCommerceRoot/Customer`: Customer storefront account management
- `User`: Internal user account, notifications, and messages
- `/PopCommerce/PopCommerceAdmin/QuickSearch`: Customer lookup

### Facility & Accounting
- `/PopCommerce/PopCommerceAdmin/Facility/FindFacility`: Manage warehouses and inventory locations
- `/PopCommerce/PopCommerceAdmin/Accounting/dashboard`: Financial management and GL accounting

### System & Developer Tools
- `/tools/Tools`: Developer tools, entity data editing, and service references
- `/tools/System`: System administration, cache management, and security settings

## Tips for LLM Clients

- All screens support parameterized queries for filtering results
- Use `moqui_render_screen` with screen path to execute screens
- Screen paths use forward slash notation (e.g., `/PopCommerce/PopCommerceAdmin/Catalog/Product`)
- Check `moqui_get_screen_details` for required parameters before rendering
- Use `renderMode: "mcp"` for structured JSON output or `"text"` for human-readable format]]></fileData>
    </moqui.resource.DbResourceFile>

    <!-- PopCommerce Root Screen Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_POPCOMM_ROOT"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="PopCommerce/PopCommerceRoot.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_POPCOMM_ROOT"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# PopCommerce Root

Main storefront and customer-facing screens for PopCommerce e-commerce component.

## Key Screens

- **Catalog & Products**: Browse the product catalog and view details
- **Customer Management**: Manage customer profiles and account settings
- **Order Management**: Track order history and status
- **Shopping Cart**: Review items and proceed to checkout
- **Messages**: Access `User/Messages` for internal communications

## Navigation

Use browse tools to explore the full catalog of PopCommerce screens. For administrative tasks, use the `/PopCommerce/PopCommerceAdmin` hierarchy.]]></fileData>
    </moqui.resource.DbResourceFile>

    <!-- PopCommerce Root Wiki Page -->
    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/PopCommerceRoot"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="PopCommerce/PopCommerceRoot"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/PopCommerceRoot"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-02 00:00:00.000"/>

    <!-- SimpleScreens Root Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_SIMPLE_ROOT"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="SimpleScreens/Root.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_SIMPLE_ROOT"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Simple Screens Root

Basic Moqui framework demonstration screens showing common patterns and examples.

## Screens

- **Hello World**: Simple text rendering example
- **Examples**: Various framework demonstration screens
- **Forms**: Form input and validation examples
- **Lists**: Data list and table examples

## Usage

These screens are primarily for learning Moqui screen development patterns.]]></fileData>
    </moqui.resource.DbResourceFile>

    <!-- SimpleScreens Root Wiki Page -->
    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/SimpleRoot"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="SimpleScreens/Root"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/SimpleRoot"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-02 00:00:00.000"/>

    <!-- User Messages Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_USER_MESSAGES"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="User/Messages.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_USER_MESSAGES"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# User Messages

Interface for sending and receiving messages between users and other parties.

## Key Actions

- **Create Message**: Send a new message. Requires `toPartyId`, `subject`, and `body`.
- **View Thread**: View the conversation history for a message.
- **Find Messages**: Search for existing messages by various criteria.

## Usage

Use this screen to communicate about orders, products, or general administrative tasks.]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/UserMessages"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="User/Messages"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/UserMessages"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-14 00:00:00.000"/>

    <!-- Tools Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_TOOLS"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="tools/Tools.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_TOOLS"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Developer Tools

Central hub for developer and data management utilities.

## Key Subscreens

- **Entity**: Data editing, import/export, and performance stats. Use `tools/Tools/Entity/DataEdit/EntityList` to browse and edit any entity.
- **Service**: Service reference and testing tools.
- **AutoScreen**: Automatically generated screens for all entities.
- **GroovyShell**: Execute arbitrary Groovy code (use with extreme caution).

## Usage

Use these tools for low-level data manipulation or system exploration when standard administrative screens are insufficient.]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/Tools"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="tools/Tools"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/Tools"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-14 00:00:00.000"/>

    <!-- System Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_SYSTEM"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="tools/System.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_SYSTEM"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# System Administration

Core system management and monitoring screens.

## Key Subscreens

- **Security**: Manage users, user groups, and artifact permissions.
- **Cache**: View and clear system caches.
- **ServiceJob**: Manage scheduled and background service jobs.
- **LogViewer**: View system logs and hit statistics.

## Usage

Use these screens to monitor system health, manage user access, and troubleshoot operational issues.]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/System"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="tools/System"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/System"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-14 00:00:00.000"/>

    <!-- ========================================== -->
    <!-- Party Management Screens                   -->
    <!-- ========================================== -->

    <!-- FindParty Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_FIND_PARTY"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="PopCommerce/PopCommerceAdmin/Party/FindParty.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_FIND_PARTY"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Find Party

Search and create parties (People, Organizations, Sales Accounts, Employees).

## Quick Actions

### Create Person (Minimal)
```
action: createPerson
parameters: {firstName: "John", lastName: "Doe"}
```

### Create Organization
```
action: createOrganization
parameters: {organizationName: "Acme Corp"}
```

### Create Sales Account
```
action: createAccount
parameters: {organizationName: "New Account Inc"}
```

### Create Employee
```
action: createPersonEmployee
parameters: {firstName: "Jane", lastName: "Smith", emailAddress: "jane@example.com"}
```

### Create Customer (Full)
```
action: createPersonCustomer
parameters: {
  firstName: "Bob", lastName: "Customer",
  roleTypeId: "Customer",
  emailAddress: "bob@example.com",
  address1: "123 Main St", city: "Austin",
  stateProvinceGeoId: "USA_TX", countryGeoId: "USA", postalCode: "78701"
}
```

## Searching

Pass `anyField` parameter to search across all party fields:
```
parameters: {anyField: "john"}
```

## Results

The PartyListForm grid shows matching parties. Click a party ID link to navigate to EditParty for details.

## Key Fields

- **roleTypeId**: Customer, Supplier, Employee, etc. (140 options)
- **partyClassificationId**: CustConsumer, CustDistributor, etc. (49 options)
- **stateProvinceGeoId**: Depends on countryGeoId - use `moqui_get_screen_details` for dynamic options]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/FindParty"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="PopCommerce/PopCommerceAdmin/Party/FindParty"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/FindParty"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-19 00:00:00.000"/>

    <!-- EditParty Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_EDIT_PARTY"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="PopCommerce/PopCommerceAdmin/Party/EditParty.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_EDIT_PARTY"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Edit Party

View and modify party details including contact info, roles, classifications, and user accounts.

## Required Parameter

- **partyId**: The party to edit (e.g., `JohnSales`, `100051`)

## Key Actions

### Update Basic Info
```
action: updateParty
parameters: {partyId: "100051", firstName: "John", lastName: "Updated", comments: "VIP customer"}
```

### Add Role
```
action: createPartyRole
parameters: {partyId: "100051", roleTypeId: "Customer"}
```

### Add Classification
```
action: setPartyClassification
parameters: {partyId: "100051", partyClassificationId: "CustConsumer"}
```

### Create User Account
```
action: createUserAccount
parameters: {partyId: "100051", username: "jdoe", emailAddress: "jdoe@example.com", newPassword: "secret123", newPasswordVerify: "secret123", userGroupId: "POP_COMMERCE_USER"}
```

### Add Contact Info
```
action: storePartyContactMech
parameters: {partyId: "100051", emailAddress: "newemail@example.com"}
```

## Subscreens

- **FindDuplicates**: Find potential duplicate party records
- **UpdateContactInfo**: Manage postal addresses, phone numbers, emails
- **UpdatePaymentMethodInfo**: Manage credit cards and payment methods

## Related Entities

This screen manages: Party, Person/Organization, PartyRole, PartyClassification, PartyContactMech, UserAccount]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/EditParty"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="PopCommerce/PopCommerceAdmin/Party/EditParty"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/EditParty"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-19 00:00:00.000"/>

    <!-- PartyMessages/FindMessage Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_PARTY_MESSAGES"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="PopCommerce/PopCommerceAdmin/Party/PartyMessages/FindMessage.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_PARTY_MESSAGES"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Party Messages

Send and view messages to/from parties. Use for internal communications about orders, products, or customers.

## Required Parameter

**partyId** is required to view this screen. Always pass a party ID:
```
path: PopCommerce/PopCommerceAdmin/Party/PartyMessages/FindMessage
parameters: {partyId: "JohnSales"}
```

## Send a Message

```
action: createMessage
parameters: {
  partyId: "JohnSales",
  toPartyId: "JohnSales",
  subject: "New product available",
  body: "The green variant of DEMO_VAR is now in stock."
}
```

## View Messages for a Party

```
path: PopCommerce/PopCommerceAdmin/Party/PartyMessages/FindMessage
parameters: {partyId: "JohnSales"}
```

This shows all messages to or from the specified party.

## Message Types

Messages are stored as CommunicationEvent entities with:
- **communicationEventTypeId**: Defaults to internal message type
- **statusId**: Message status (sent, read, etc.)
- **fromPartyId**: Sender (defaults to current user)
- **toPartyId**: Recipient party

## Difference from User/Messages

- **Party/PartyMessages**: Admin screen for messaging any party in the system (requires partyId)
- **User/Messages**: User-facing screen for current user's own messages (no partyId needed)

Use PartyMessages when you need to send messages on behalf of the system or to parties who may not have user accounts.]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/PartyMessages"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="PopCommerce/PopCommerceAdmin/Party/PartyMessages/FindMessage"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/PartyMessages"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-19 00:00:00.000"/>

    <!-- ========================================== -->
    <!-- Catalog/Product Screens                    -->
    <!-- ========================================== -->

    <!-- FindProduct Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_FIND_PRODUCT"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="PopCommerce/PopCommerceAdmin/Catalog/Product/FindProduct.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_FIND_PRODUCT"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Find Product

Search and create products in the catalog.

## Searching Products

### By Name or ID
```
parameters: {productId: "DEMO", anyField: "widget"}
```

### By Category
```
parameters: {productCategoryId: "CATALOG"}
```

### By Feature
```
parameters: {productFeatureId: "ColorBlue"}
```

## Creating Products

### Standard Product
```
action: createProduct
parameters: {
  productName: "New Widget",
  productTypeEnumId: "PtAsset",
  assetTypeEnumId: "AstTpInventory"
}
```

### Virtual Product (for variants)
```
action: createProduct
parameters: {
  productName: "Widget with Options",
  productTypeEnumId: "PtVirtual"
}
```

## Product Types

- **PtAsset**: Standard inventory product
- **PtVirtual**: Parent product for variants (has selectable features)
- **PtService**: Service or labor product
- **PtDigital**: Downloadable digital product

## Workflow: Creating Variants

1. Create virtual parent: `productTypeEnumId: "PtVirtual"`
2. Navigate to EditProduct, add selectable features (e.g., Color: Red, Blue)
3. Create variant products: `productTypeEnumId: "PtAsset"`
4. On variants, add distinguishing features (e.g., Color: Red)
5. Create ProductAssoc linking parent to variants with `productAssocTypeEnumId: "PatVariant"`

## Results

ProductListForm grid shows matches. Click product link to navigate to EditProduct.]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/FindProduct"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="PopCommerce/PopCommerceAdmin/Catalog/Product/FindProduct"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/FindProduct"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-19 00:00:00.000"/>

    <!-- EditProduct Documentation -->
    <moqui.resource.DbResource
        resourceId="WIKI_MCP_DOCS_EDIT_PRODUCT"
        parentResourceId="WIKI_MCP_SCREEN_DOCS"
        filename="PopCommerce/PopCommerceAdmin/Catalog/Product/EditProduct.md"
        isFile="Y"/>
    <moqui.resource.DbResourceFile
        resourceId="WIKI_MCP_DOCS_EDIT_PRODUCT"
        mimeType="text/markdown"
        versionName="v1">
        <fileData><![CDATA[# Edit Product

Manage product details, features, prices, categories, and associations.

## Required Parameter

- **productId**: Product to edit (e.g., `DEMO_1`, `100000`)

## Key Subscreens

- **EditProduct** (main): Basic product info
- **EditFeatures**: Product features (selectable/distinguishing)
- **EditAssocs**: Product associations (variants, accessories, etc.)
- **EditPrices**: Price configuration
- **EditCategories**: Category membership

## Managing Features

### Add Selectable Feature (Virtual Products)
```
path: PopCommerce/PopCommerceAdmin/Catalog/Product/EditProduct/EditFeatures
action: createProductFeature
parameters: {
  productId: "DEMO_VAR",
  productFeatureId: "ColorRed",
  applTypeEnumId: "PfatSelectable"
}
```

### Add Distinguishing Feature (Variant Products)
```
action: createProductFeature
parameters: {
  productId: "DEMO_VAR_RED",
  productFeatureId: "ColorRed",
  applTypeEnumId: "PfatDistinguishing"
}
```

## Feature Application Types

- **PfatSelectable**: Customer can choose this feature (on virtual parent)
- **PfatDistinguishing**: Identifies a specific variant
- **PfatStandard**: Always included with product
- **PfatRequired**: Must be selected at purchase

## Managing Associations

### Link Variant to Parent
```
path: PopCommerce/PopCommerceAdmin/Catalog/Product/EditProduct/EditAssocs
action: createProductAssoc
parameters: {
  productId: "DEMO_VAR",
  toProductId: "DEMO_VAR_RED",
  productAssocTypeEnumId: "PatVariant"
}
```

## Association Types

- **PatVariant**: Links virtual parent to variant
- **PatAccessory**: Suggested accessory
- **PatComplement**: Complementary product
- **PatSubstitute**: Equivalent alternative

## Complete Variant Workflow

1. Edit virtual product, go to EditFeatures
2. Add selectable features (PfatSelectable) for each option
3. Create variant products via FindProduct
4. Edit each variant, add distinguishing feature (PfatDistinguishing)
5. Edit parent, go to EditAssocs, create PatVariant associations]]></fileData>
    </moqui.resource.DbResourceFile>

    <moqui.resource.wiki.WikiPage
        wikiPageId="MCP_SCREEN_DOCS/EditProduct"
        wikiSpaceId="MCP_SCREEN_DOCS"
        pagePath="PopCommerce/PopCommerceAdmin/Catalog/Product/EditProduct"
        publishedVersionName="v1"
        restrictView="N">
    </moqui.resource.wiki.WikiPage>

    <moqui.resource.wiki.WikiPageHistory
        wikiPageId="MCP_SCREEN_DOCS/EditProduct"
        historySeqId="1"
        versionName="v1"
        userId="EX_JOHN_DOE"
        changeDateTime="2025-01-19 00:00:00.000"/>

</entity-facade-xml>
