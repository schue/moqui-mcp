<?xml version="1.0" encoding="UTF-8"?>
<entity-facade-xml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-facade-3.xsd" type="seed">

    <!-- ========================================================= -->
    <!-- Agent User Account (for authentication)                     -->
    <!-- ========================================================= -->

    <moqui.security.UserAccount 
        userId="AGENT_CLAUDE" 
        username="agent-claude" 
        currentPassword="16ac58bbfa332c1c55bd98b53e60720bfa90d394" 
        passwordHashType="SHA"/>

    <moqui.security.UserGroup userGroupId="AgentUsers" description="AI Agent Users"/>
    <moqui.security.UserGroupMember userGroupId="AgentUsers" userId="AGENT_CLAUDE" fromDate="2026-02-04 00:00:00.000"/>

    <!-- Agent users have permission to execute the delegation service -->
    <moqui.security.ArtifactGroup artifactGroupId="AgentDelegationServices" description="Agent Tool Delegation Services"/>
    <moqui.security.ArtifactGroupMember artifactGroupId="AgentDelegationServices" artifactName="AgentServices.call#McpToolWithDelegation" artifactTypeEnumId="AT_SERVICE"/>
    <moqui.security.ArtifactAuthz userGroupId="AgentUsers" artifactGroupId="AgentDelegationServices" authzTypeEnumId="AUTHZT_ALLOW" authzActionEnumId="AUTHZA_ALL"/>

    <!-- Agent Queue Poller Job -->
    <moqui.service.job.ServiceJob jobName="AgentQueuePoller" description="Poll Agent Queue and process tasks with AI"
        serviceName="AgentServices.poll#AgentQueue" cronExpression="0/30 * * * * ?" paused="N"/>

    <!-- Agent Task Message Type -->
    <moqui.service.message.SystemMessageType systemMessageTypeId="SmtyAgentTask" description="Agent Task"
        consumeServiceName="AgentServices.poll#AgentQueue"/>

</entity-facade-xml>
